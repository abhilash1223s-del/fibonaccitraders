<!DOCTYPE html>
<html>
<head>
  <title>Trading Journal</title>
</head>
<body style="font-family: Arial; background:#f4f4f4; margin:20px;">

<h1 style="text-align:center;">Trading Journal</h1>

<div style="max-width:1000px; margin:auto;">

  <!-- Add Trade -->
  <div style="background:white; padding:20px; border-radius:10px; margin-bottom:20px;">
    <h2>Add Trade</h2>

    <input id="trade" placeholder="Trade (Example: NIFTY 25200CE)" 
           style="padding:10px; width:100%; margin-bottom:10px;">

    <input id="buy" placeholder="Buy Price" 
           style="padding:10px; width:100%; margin-bottom:10px;">

    <input id="sell" placeholder="Sell Price" 
           style="padding:10px; width:100%; margin-bottom:10px;">

    <input id="pointsGained" placeholder="Points Gained" 
           style="padding:10px; width:100%; margin-bottom:10px;">

    <input id="pointsLost" placeholder="Points Lost" 
           style="padding:10px; width:100%; margin-bottom:10px;">

    <input id="lots" placeholder="Lot Size" 
           style="padding:10px; width:100%; margin-bottom:10px;">

    <input id="profit" placeholder="Profit (₹)" 
           style="padding:10px; width:100%; margin-bottom:10px;">

    <input id="loss" placeholder="Loss (₹)" 
           style="padding:10px; width:100%; margin-bottom:10px;">

    <input id="brokerage" placeholder="Brokerage (₹)" 
           style="padding:10px; width:100%; margin-bottom:10px;">

    <input id="reason" placeholder="Why you took this trade?" 
           style="padding:10px; width:100%; margin-bottom:10px;">

    <button onclick="addTrade()" 
            style="padding:12px; width:100%; background:black; color:white; border:none; cursor:pointer;">
      Add Trade
    </button>
  </div>

  <!-- Trade Table -->
  <div style="background:white; padding:20px; border-radius:10px;">
    <h2>Trades</h2>
    <table id="tradeTable" 
           style="width:100%; border-collapse:collapse; font-size:14px;">
      
      <thead>
        <tr style="background:black; color:white;">
          <th>SLNO</th>
          <th>Trade</th>
          <th>BUY</th>
          <th>SELL</th>
          <th>Points Gained</th>
          <th>Points Lost</th>
          <th>Lots Size</th>
          <th>Profit</th>
          <th>Loss</th>
          <th>Brokerage</th>
          <th>Net P/L</th>
          <th>Why u took</th>
          <th>Delete</th>
        </tr>
      </thead>

      <tbody></tbody>
    </table>
  </div>

</div>

<script>
  let trades = JSON.parse(localStorage.getItem("tradesV2")) || [];

  function saveTrades() {
    localStorage.setItem("tradesV2", JSON.stringify(trades));
  }

  function loadTrades() {
    const tbody = document.querySelector("#tradeTable tbody");
    tbody.innerHTML = "";

    trades.forEach((t, index) => {
      const row = `
        <tr>
          <td>${index + 1}</td>
          <td contenteditable="true" oninput="update(${index}, 'trade', this.innerText)">${t.trade}</td>
          <td contenteditable="true" oninput="update(${index}, 'buy', this.innerText)">${t.buy}</td>
          <td contenteditable="true" oninput="update(${index}, 'sell', this.innerText)">${t.sell}</td>
          <td contenteditable="true" oninput="update(${index}, 'pg', this.innerText)">${t.pg}</td>
          <td contenteditable="true" oninput="update(${index}, 'pl', this.innerText)">${t.pl}</td>
          <td contenteditable="true" oninput="update(${index}, 'lots', this.innerText)">${t.lots}</td>
          <td contenteditable="true" oninput="update(${index}, 'profit', this.innerText)">${t.profit}</td>
          <td contenteditable="true" oninput="update(${index}, 'loss', this.innerText)">${t.loss}</td>
          <td contenteditable="true" oninput="update(${index}, 'brokerage', this.innerText)">${t.brokerage}</td>
          <td>${(Number(t.profit) - Number(t.loss) - Number(t.brokerage)).toFixed(2)}</td>
          <td contenteditable="true" oninput="update(${index}, 'reason', this.innerText)">${t.reason}</td>
          <td>
            <button onclick="deleteTrade(${index})" 
                    style="background:red; color:white; border:none; padding:6px; cursor:pointer;">
              X
            </button>
          </td>
        </tr>`;
      tbody.innerHTML += row;
    });
  }

  function update(index, field, value) {
    trades[index][field] = value;
    saveTrades();
    loadTrades();
  }

  function addTrade() {
    const newTrade = {
      trade: document.getElementById("trade").value,
      buy: document.getElementById("buy").value,
      sell: document.getElementById("sell").value,
      pg: document.getElementById("pointsGained").value,
      pl: document.getElementById("pointsLost").value,
      lots: document.getElementById("lots").value,
      profit: document.getElementById("profit").value,
      loss: document.getElementById("loss").value,
      brokerage: document.getElementById("brokerage").value,
      reason: document.getElementById("reason").value
    };

    trades.push(newTrade);
    saveTrades();
    loadTrades();
  }

  function deleteTrade(i) {
    trades.splice(i, 1);
    saveTrades();
    loadTrades();
  }

  loadTrades();
</script>

</body>
</html>
